{"version":3,"sources":["hooks/api.js","components/Profile.js","components/Invitation.js","components/Sent.js","components/Received.js","components/Invite.js","components/App.js","index.js"],"names":["STATUS_CREATED","STATUS_ACCEPTED","STATUS_DECLINED","STATUS_CANCELED","useCurrentUserId","useState","currentUserId","setCurrentUserId","useEffect","a","axios","result","data","user","id","fetchData","useUsers","users","setUsers","useOtherUsers","filter","useCurrentUser","setUser","length","useInvitations","invitations","setInvitations","map","invitation","statusString","status","sort","b","useSentInvitations","sentInvitations","setSentInvitations","invite","senderId","useFilteredSentInvitations","setFilter","created","indexOf","receiver","useReceivedInvitations","receivedInvitations","setReceivedInvitations","receiverId","useFilteredReceivedInvitations","sender","useAsyncEndpoint","fn","complete","pending","error","res","setRes","req","setReq","then","catch","usePostInviteEndpoint","url","method","usePostChangeInvitationStatus","action","Profile","className","name","to","Invitation","props","updateResponse","updateInvitationStatus","handleCancel","e","preventDefault","handleAccept","handleDecline","controllers","href","onClick","key","Sent","sent","invitationsBlock","type","value","onChange","target","Received","received","Invite","setReceiverId","message","setMessage","inviteResponse","postNewInvite","history","push","receivers","onSubmit","console","log","App","path","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ccd58c6f.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// Expected to be in the root on the same server\nconst apiUrl = '';\n\nexport const STATUS_CREATED = 0;\nexport const STATUS_ACCEPTED = 1;\nexport const STATUS_DECLINED = 10;\nexport const STATUS_CANCELED = 20;\n\nexport const useCurrentUserId = () => {\n  const [currentUserId, setCurrentUserId] = useState();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await axios(`${apiUrl}/users/profile`);\n\n      setCurrentUserId(result.data.user.id);\n    };\n\n    fetchData();\n  }, []);\n\n  return currentUserId;\n};\n\nexport const useUsers = () => {\n  const [users, setUsers] = useState();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await axios(`${apiUrl}/users`);\n\n      setUsers(result.data);\n    };\n\n    fetchData();\n  }, []);\n\n  return [users];\n};\n\nexport const useOtherUsers = () => {\n  const currentUserId = useCurrentUserId();\n  const [users] = useUsers();\n\n  if (!currentUserId || ! users) return [];\n\n  const otherUsers = users.filter(user => user.id !== currentUserId);\n\n  return [otherUsers];\n};\n\nexport const useCurrentUser = () => {\n  const [user, setUser] = useState();\n\n  const [users] = useUsers();\n  const currentUserId = useCurrentUserId();\n\n  if (currentUserId && users && users.length && !user) {\n    setUser(users.filter(user => user.id === currentUserId)[0]);\n  }\n\n  return user;\n};\n\nexport const useInvitations = () => {\n  const currentUserId = useCurrentUserId();\n  const [invitations, setInvitations] = useState();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      if (!currentUserId) return;\n\n      const result = await axios(`${apiUrl}/users/${currentUserId}/invitations`);\n\n      const invitations = result\n        .data\n        .map(invitation => ({\n          ...invitation,\n          statusString: statusString(invitation.status),\n        }))\n        .sort((a, b) => {\n          if (a.status < b.status) return -1;\n          if (a.status > b.status) return 1;\n          return 0;\n        });\n\n      setInvitations(invitations);\n    };\n\n    fetchData();\n  }, [currentUserId]);\n\n  const statusString = status => {\n    if (status === STATUS_ACCEPTED) return 'accepted';\n    if (status === STATUS_DECLINED) return 'declined';\n    if (status === STATUS_CANCELED) return 'canceled';\n\n    return 'created';\n  };\n\n  return [invitations];\n};\n\nexport const useSentInvitations = () => {\n  const [sentInvitations, setSentInvitations] = useState();\n\n  const [invitations] = useInvitations();\n  const currentUserId = useCurrentUserId();\n\n  if (invitations && invitations && !sentInvitations) {\n   setSentInvitations(invitations.filter(invite => invite.senderId === currentUserId))\n  }\n\n  return [sentInvitations];\n};\n\nexport const useFilteredSentInvitations = () => {\n  const [sentInvitations] = useSentInvitations();\n  const [filter, setFilter] = useState('');\n\n  if (!sentInvitations) return [null, filter, setFilter];\n\n  const check = invitation => (\n    invitation.created.indexOf(filter) >= 0\n    || invitation.receiver && invitation.receiver.indexOf(filter) >= 0\n    || invitation.statusString.indexOf(filter) >= 0\n  );\n\n  const filtered = sentInvitations.filter(check);\n\n  return [filtered, filter, setFilter];\n};\n\nexport const useReceivedInvitations = () => {\n  const [receivedInvitations, setReceivedInvitations] = useState();\n\n  const [invitations] = useInvitations();\n  const currentUserId = useCurrentUserId();\n\n  if (invitations && invitations && !receivedInvitations) {\n    setReceivedInvitations(invitations.filter(invite => invite.receiverId === currentUserId))\n  }\n\n  return [receivedInvitations];\n};\n\nexport const useFilteredReceivedInvitations = () => {\n  const [receivedInvitations] = useReceivedInvitations();\n  const [filter, setFilter] = useState('');\n\n  if (!receivedInvitations) return [null, filter, setFilter];\n\n  const check = invitation => (\n    invitation.created.indexOf(filter) >= 0\n    || invitation.sender && invitation.sender.indexOf(filter) >= 0\n    || invitation.statusString.indexOf(filter) >= 0\n  );\n\n  const filtered = receivedInvitations.filter(check);\n\n  return [filtered, filter, setFilter];\n};\n\nexport const useAsyncEndpoint = (fn) => {\n  const [res, setRes] = useState({\n    data: null,\n    complete: false,\n    pending: false,\n    error: false,\n  });\n  const [req, setReq] = useState();\n\n  useEffect(\n    () => {\n      if (!req) return;\n\n      setRes({\n        data: null,\n        pending: true,\n        error: false,\n        complete: false,\n      });\n      axios(req)\n        .then(res => setRes({\n          data: res.data,\n          pending: false,\n          error: false,\n          complete: true,\n        }))\n        .catch(() => setRes({\n          data: null,\n          pending: false,\n          error: true,\n          complete: true,\n        }));\n    },\n    [req],\n  );\n\n  return [res, (...args) => setReq(fn(...args))];\n};\n\nexport const usePostInviteEndpoint = () => useAsyncEndpoint(\n  data => ({\n    url: `${apiUrl}/invitations/send`,\n    method: 'POST',\n    data,\n  }),\n);\n\nexport const usePostChangeInvitationStatus = () => useAsyncEndpoint(\n  (id, status) => {\n    const action = (() => {\n      if (status === STATUS_CANCELED) return 'cancel';\n      if (status === STATUS_ACCEPTED) return 'accept';\n      return 'decline';\n    }) ();\n\n    return {\n      url: `${apiUrl}/invitations/${id}/${action}`,\n      method: 'POST',\n      data: {},\n    };\n  },\n);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport {useCurrentUser, useSentInvitations, useReceivedInvitations } from '../hooks/api';\n\nfunction Profile() {\n  const user = useCurrentUser();\n  const [sentInvitations] = useSentInvitations();\n  const [receivedInvitations] = useReceivedInvitations();\n\n  if (!user || !sentInvitations || !receivedInvitations) return <p>Loading...</p>;\n\n  return (\n    <div className=\"profile\">\n      <h2>Logged in as {user.name}</h2>\n      <div>Sent: <Link to=\"/sent/\">{sentInvitations.length}</Link></div>\n      <div>Received: <Link to=\"/received/\">{receivedInvitations.length}</Link></div>\n      <div><Link to=\"/invite/\">Invite</Link></div>\n    </div>\n  );\n}\n\nexport default Profile\n","import React from \"react\";\nimport {\n  useCurrentUserId,\n  usePostChangeInvitationStatus,\n  STATUS_ACCEPTED,\n  STATUS_DECLINED,\n  STATUS_CANCELED,\n  STATUS_CREATED,\n} from \"../hooks/api\";\n\nfunction Invitation(props) {\n  const currentUserId = useCurrentUserId();\n  const [updateResponse, updateInvitationStatus] = usePostChangeInvitationStatus();\n\n  if (!currentUserId) return <p>Loading...</p>;\n\n  const { invitation } = props;\n\n  const handleCancel = e => {\n    e.preventDefault();\n\n    updateInvitationStatus(invitation.id, STATUS_CANCELED);\n  };\n  const handleAccept = e => {\n    e.preventDefault();\n\n    updateInvitationStatus(invitation.id, STATUS_ACCEPTED);\n  };\n  const handleDecline = e => {\n    e.preventDefault();\n\n    updateInvitationStatus(invitation.id, STATUS_DECLINED);\n  };\n\n  const controllers = (() => {\n    if (updateResponse.pending) return <span>updating...</span>;\n\n    if (invitation.status !== STATUS_CREATED) return null;\n\n    if (currentUserId === invitation.senderId) return <a href=\"#\" onClick={handleCancel}>Cancel</a>;\n\n    return [\n      <a href=\"#\" key=\"accept\" onClick={handleAccept}>Accept</a>,\n      <a href=\"#\" key=\"decline\" onClick={handleDecline}>Decline</a>,\n    ];\n  })();\n\n  return (\n    <div className=\"Invitation\">\n      <span className=\"InvitationBody\">{invitation.created}</span>\n      <span className=\"InvitationStatus\">{invitation.statusString}</span>\n      <div className=\"InvitationControllers\">\n        {controllers}\n      </div>\n    </div>\n  );\n}\n\nexport default Invitation;\n","import React from 'react';\n\nimport { useFilteredSentInvitations } from '../hooks/api';\nimport Invitation from \"./Invitation\";\n\nfunction Sent() {\n  const [sent, filter, setFilter] = useFilteredSentInvitations();\n\n  if (!sent) return <p>Loading...</p>;\n\n  const invitations = sent.map(\n    invitation => (\n      <li key={invitation.id}>\n        <Invitation invitation={invitation} />\n      </li>\n    ),\n  );\n  const invitationsBlock = (() => {\n    if (!invitations.length) return <p>Nothing found</p>;\n\n    return <ul>{invitations}</ul>\n  })();\n\n  const handleFilter = e => setFilter(e.target.value);\n\n  return (\n    <div className=\"sent\">\n      <h2>Sent</h2>\n      <div>\n        <input type=\"text\" value={filter} onChange={handleFilter} />\n      </div>\n      {invitationsBlock}\n    </div>\n  );\n}\n\nexport default Sent;","import React from 'react';\n\nimport Invitation from './Invitation';\nimport { useFilteredReceivedInvitations } from '../hooks/api';\n\nfunction Received() {\n  const [received, filter, setFilter] = useFilteredReceivedInvitations();\n\n  if (!received) return <p>Loading...</p>;\n\n  const invitations = received.map(\n    invitation => (\n      <li key={invitation.id}>\n        <Invitation invitation={invitation} />\n      </li>\n    ),\n  );\n  const invitationsBlock = (() => {\n    if (!invitations.length) return <p>Nothing found</p>;\n\n    return <ul>{invitations}</ul>\n  })();\n\n  const handleFilter = e => setFilter(e.target.value);\n\n  return (\n    <div className=\"received\">\n      <h2>Received</h2>\n      <div>\n        <input type=\"text\" value={filter} onChange={handleFilter} />\n      </div>\n      {invitationsBlock}\n    </div>\n  );\n}\n\nexport default Received;","import React, { useState } from 'react';\n\nimport { useOtherUsers, usePostInviteEndpoint } from '../hooks/api';\n\nconst currentUserId = 1;\n\nexport default function Invite(props) {\n  const [receiverId, setReceiverId] = useState();\n  const [message, setMessage] = useState('');\n  const [inviteResponse, postNewInvite] = usePostInviteEndpoint();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    postNewInvite({\n      senderId: currentUserId,\n      receiverId,\n      message,\n    });\n  };\n\n  const [users] = useOtherUsers();\n\n  if (!users) return <p>Loading...</p>;\n\n  if (inviteResponse.pending) return '<p>Sending...</p>';\n  if (inviteResponse.complete) props.history.push('/sent');\n\n  const receivers = users\n    .map(user => <option key={user.id} value={user.id}>{user.name}</option>);\n\n  if (users.length && !receiverId) setReceiverId(users[0].id);\n\n  return (\n    <div className=\"invite\">\n      <h2>Invite</h2>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label>Receiver\n            <select value={receiverId} onChange={e => {console.log(e.target.value); setReceiverId(e.target.value)}}>\n              {receivers}\n            </select>\n          </label>\n        </div>\n        <div>\n          <label>Message\n            <input type=\"text\" value={message} onChange={e => setMessage(e.target.value)}/>\n          </label>\n        </div>\n        <div>\n          <input type=\"submit\" value=\"Send\"/>\n        </div>\n      </form>\n    </div>\n  );\n}\n","import React from 'react';\nimport {BrowserRouter as Router, Route, Link} from 'react-router-dom';\n\nimport Profile from './Profile';\nimport Sent from './Sent';\nimport Received from './Received';\nimport Invite from './Invite';\n\nimport '../App.css';\n\n\nfunction App() {\n  return (\n      <Router>\n        <div>\n          <nav>\n            <ul>\n              <li>\n                <Link to=\"/\">Profile</Link>\n              </li>\n              <li>\n                <Link to=\"/sent/\">Sent</Link>\n              </li>\n              <li>\n                <Link to=\"/received/\">Received</Link>\n              </li>\n              <li>\n                <Link to=\"/invite/\">Invite</Link>\n              </li>\n            </ul>\n          </nav>\n\n          <Route path=\"/\" exact component={Profile}/>\n          <Route path=\"/sent/\" component={Sent}/>\n          <Route path=\"/received/\" component={Received}/>\n          <Route path=\"/invite/\" component={Invite}/>\n        </div>\n      </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root')\n);\n"],"sourceRoot":""}