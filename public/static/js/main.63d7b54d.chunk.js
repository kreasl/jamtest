(window["webpackJsonpsrc.frontend"]=window["webpackJsonpsrc.frontend"]||[]).push([[0],{31:function(e,t,n){e.exports=n(60)},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),l=n.n(c),u=n(7),i=n(8),o=n(1),s=n(28),f=n(11),m=n.n(f),d=n(14),v=n(12),p=n.n(v);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O=0,j=1,g=10,h=20,S=function(e){return e===j?"accepted":e===g?"declined":e===h?"canceled":"created"},y=function(){var e=Object(a.useState)(1);return Object(o.a)(e,1)[0]},w=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)(function(){(function(){var e=Object(d.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()("".concat("","/users"));case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[]),[n]},x=function(){var e=y(),t=w(),n=Object(o.a)(t,1)[0];return e&&n?[n.filter(function(t){return t.id!==e})]:[]},k=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],c=w(),l=Object(o.a)(c,1)[0],u=y();return l&&l.length&&!n&&r(l.filter(function(e){return e.id===u})[0]),n},I=function(){var e=y(),t=Object(a.useState)(),n=Object(o.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)(function(){(function(){var t=Object(d.a)(m.a.mark(function t(){var n,a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p()("".concat("","/users/").concat(e,"/invitations"));case 2:n=t.sent,a=n.data.map(function(e){return b({},e,{statusString:S(e.status)})}).sort(function(e,t){return e.status<t.status?-1:e.status>t.status?1:0}),c(a);case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})()()},[e]),[r]},P=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],c=I(),l=Object(o.a)(c,1)[0],u=y();return l&&l.length&&!n&&r(l.filter(function(e){return e.senderId===u})),[n]},N=function(){var e=P(),t=Object(o.a)(e,1)[0],n=Object(a.useState)(""),r=Object(o.a)(n,2),c=r[0],l=r[1];if(!t)return[null,c,l];return[t.filter(function(e){return e.created.indexOf(c)>=0||e.receiver&&e.receiver.indexOf(c)>=0||e.statusString.indexOf(c)>=0}),c,l]},C=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],c=I(),l=Object(o.a)(c,1)[0],u=y();return l&&l.length&&!n&&r(l.filter(function(e){return e.receiverId===u})),[n]},D=function(){var e=C(),t=Object(o.a)(e,1)[0],n=Object(a.useState)(""),r=Object(o.a)(n,2),c=r[0],l=r[1];if(!t)return[null,c,l];return[t.filter(function(e){return e.created.indexOf(c)>=0||e.sender&&e.sender.indexOf(c)>=0||e.statusString.indexOf(c)>=0}),c,l]},L=function(e){var t=Object(a.useState)({data:null,complete:!1,pending:!1,error:!1}),n=Object(o.a)(t,2),r=n[0],c=n[1],l=Object(a.useState)(),u=Object(o.a)(l,2),i=u[0],s=u[1];return Object(a.useEffect)(function(){i&&(c({data:null,pending:!0,error:!1,complete:!1}),p()(i).then(function(e){return c({data:e.data,pending:!1,error:!1,complete:!0})}).catch(function(){return c({data:null,pending:!1,error:!0,complete:!0})}))},[i]),[r,function(){return s(e.apply(void 0,arguments))}]},R=function(){return L(function(e){return{url:"".concat("","/invitations/send"),method:"POST",data:e}})},B=function(){return L(function(e,t){return{url:"".concat("","/invitations/").concat(e,"/").concat(S(t)),method:"POST",data:{}}})};var J=function(){var e=k(),t=P(),n=Object(o.a)(t,1)[0],a=C(),c=Object(o.a)(a,1)[0];return e&&n&&c?r.a.createElement("div",{className:"profile"},r.a.createElement("h2",null,"Logged in as ",e.name),r.a.createElement("div",null,"Sent: ",r.a.createElement(u.b,{to:"/sent/"},n.length)),r.a.createElement("div",null,"Received: ",r.a.createElement(u.b,{to:"/received/"},c.length)),r.a.createElement("div",null,r.a.createElement(u.b,{to:"/invite/"},"Invite"))):r.a.createElement("p",null,"Loading...")};var T=function(e){var t=y(),n=B(),a=Object(o.a)(n,2),c=a[0],l=a[1];if(!t)return r.a.createElement("p",null,"Loading...");var u=e.invitation,i=function(e){e.preventDefault(),l(u.id,h)},s=function(e){e.preventDefault(),l(u.id,j)},f=function(e){e.preventDefault(),l(u.id,g)},m=c.pending?r.a.createElement("span",null,"updating..."):u.status!==O?null:t===u.senderId?r.a.createElement("a",{href:"#",onClick:i},"Cancel"):[r.a.createElement("a",{href:"#",key:"accept",onClick:s},"Accept"),r.a.createElement("a",{href:"#",key:"decline",onClick:f},"Decline")];return r.a.createElement("div",{className:"Invitation"},r.a.createElement("span",{className:"InvitationBody"},u.created),r.a.createElement("span",{className:"InvitationStatus"},u.statusString),r.a.createElement("div",{className:"InvitationControllers"},m))};var A=function(){var e=N(),t=Object(o.a)(e,3),n=t[0],a=t[1],c=t[2];if(!n)return r.a.createElement("p",null,"Loading...");var l=n.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(T,{invitation:e}))}),u=l.length?r.a.createElement("ul",null,l):r.a.createElement("p",null,"Nothing found");return r.a.createElement("div",{className:"sent"},r.a.createElement("h2",null,"Sent"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:a,onChange:function(e){return c(e.target.value)}})),u)};var M=function(){var e=D(),t=Object(o.a)(e,3),n=t[0],a=t[1],c=t[2];if(!n)return r.a.createElement("p",null,"Loading...");var l=n.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(T,{invitation:e}))}),u=l.length?r.a.createElement("ul",null,l):r.a.createElement("p",null,"Nothing found");return r.a.createElement("div",{className:"received"},r.a.createElement("h2",null,"Received"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:a,onChange:function(e){return c(e.target.value)}})),u)},q=1;function z(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),c=n[0],l=n[1],u=Object(a.useState)(""),i=Object(o.a)(u,2),s=i[0],f=i[1],m=R(),d=Object(o.a)(m,2),v=(d[0],d[1]),p=x(),E=Object(o.a)(p,1)[0];if(!E)return r.a.createElement("p",null,"Loading...");var b=E.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)});return E.length&&!c&&l(E[0].id),r.a.createElement("div",{className:"invite"},r.a.createElement("h2",null,"Invite"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v({senderId:q,receiverId:c,message:s})}},r.a.createElement("div",null,r.a.createElement("label",null,"Receiver",r.a.createElement("select",{value:c,onChange:function(e){console.log(e.target.value),l(e.target.value)}},b))),r.a.createElement("div",null,r.a.createElement("label",null,"Message",r.a.createElement("input",{type:"text",value:s,onChange:function(e){return f(e.target.value)}}))),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:"Send"}))))}n(59);var F=function(){return r.a.createElement(u.a,null,r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.b,{to:"/"},"Profile")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/sent/"},"Sent")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/received/"},"Received")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/invite/"},"Invite")))),r.a.createElement(i.a,{path:"/",exact:!0,component:J}),r.a.createElement(i.a,{path:"/sent/",component:A}),r.a.createElement(i.a,{path:"/received/",component:M}),r.a.createElement(i.a,{path:"/invite/",component:z})))};l.a.render(r.a.createElement(F,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.63d7b54d.chunk.js.map