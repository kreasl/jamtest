(window["webpackJsonpsrc.frontend"]=window["webpackJsonpsrc.frontend"]||[]).push([[0],{31:function(e,t,n){e.exports=n(60)},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),l=n.n(c),u=n(7),i=n(8),o=n(1),f=n(28),s=n(11),m=n.n(s),d=n(14),v=n(12),p=n.n(v);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O=0,j=1,g=10,h=20,y=function(){var e=Object(a.useState)(1);return Object(o.a)(e,1)[0]},S=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)(function(){(function(){var e=Object(d.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()("".concat("","/users"));case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[]),[n]},w=function(){var e=y(),t=S(),n=Object(o.a)(t,1)[0];return e&&n?[n.filter(function(t){return t.id!==e})]:[]},x=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],c=S(),l=Object(o.a)(c,1)[0],u=y();return l&&l.length&&!n&&r(l.filter(function(e){return e.id===u})[0]),n},k=function(){var e=y(),t=Object(a.useState)(),n=Object(o.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)(function(){(function(){var t=Object(d.a)(m.a.mark(function t(){var n,a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p()("".concat("","/users/").concat(e,"/invitations"));case 2:n=t.sent,a=n.data.map(function(e){return b({},e,{statusString:l(e.status)})}),c(a);case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}})()()},[e]);var l=function(e){return e===j?"accepted":e===g?"declined":e===h?"canceled":"created"};return[r]},I=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],c=k(),l=Object(o.a)(c,1)[0],u=y();return l&&l.length&&!n&&r(l.filter(function(e){return e.senderId===u})),[n]},P=function(){var e=I(),t=Object(o.a)(e,1)[0],n=Object(a.useState)(""),r=Object(o.a)(n,2),c=r[0],l=r[1];if(!t)return[null,c,l];return[t.filter(function(e){return e.created.indexOf(c)>=0||e.receiver&&e.receiver.indexOf(c)>=0||e.statusString.indexOf(c)>=0}),c,l]},C=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],c=k(),l=Object(o.a)(c,1)[0],u=y();return l&&l.length&&!n&&r(l.filter(function(e){return e.receiverId===u})),[n]},D=function(){var e=C(),t=Object(o.a)(e,1)[0],n=Object(a.useState)(""),r=Object(o.a)(n,2),c=r[0],l=r[1];if(!t)return[null,c,l];return[t.filter(function(e){return e.created.indexOf(c)>=0||e.sender&&e.sender.indexOf(c)>=0||e.statusString.indexOf(c)>=0}),c,l]},N=function(e){var t=Object(a.useState)({data:null,complete:!1,pending:!1,error:!1}),n=Object(o.a)(t,2),r=n[0],c=n[1],l=Object(a.useState)(),u=Object(o.a)(l,2),i=u[0],f=u[1];return Object(a.useEffect)(function(){i&&(c({data:null,pending:!0,error:!1,complete:!1}),p()(i).then(function(e){return c({data:e.data,pending:!1,error:!1,complete:!0})}).catch(function(){return c({data:null,pending:!1,error:!0,complete:!0})}))},[i]),[r,function(){return f(e.apply(void 0,arguments))}]},L=function(){return N(function(e){return{url:"".concat("","/invitations/send"),method:"POST",data:e}})},R=function(){return N(function(e,t){return{url:"".concat("","/invitations/").concat(e,"/status"),method:"POST",data:{status:t}}})};var B=function(){var e=x(),t=I(),n=Object(o.a)(t,1)[0],a=C(),c=Object(o.a)(a,1)[0];return e&&n&&c?r.a.createElement("div",{className:"profile"},r.a.createElement("h2",null,"Logged in as ",e.name),r.a.createElement("div",null,"Sent: ",r.a.createElement(u.b,{to:"/sent/"},n.length)),r.a.createElement("div",null,"Received: ",r.a.createElement(u.b,{to:"/received/"},c.length)),r.a.createElement("div",null,r.a.createElement(u.b,{to:"/invite/"},"Invite"))):r.a.createElement("p",null,"Loading...")};var J=function(e){var t=y(),n=R(),a=Object(o.a)(n,2),c=a[0],l=a[1];if(!t)return r.a.createElement("p",null,"Loading...");var u=e.invitation,i=function(e){e.preventDefault(),l(u.id,h)},f=function(e){e.preventDefault(),l(u.id,j)},s=function(e){e.preventDefault(),l(u.id,g)},m=c.pending?r.a.createElement("span",null,"updating..."):u.status!==O?null:t===u.senderId?r.a.createElement("a",{href:"#",onClick:i},"Cancel"):[r.a.createElement("a",{href:"#",key:"accept",onClick:f},"Accept"),r.a.createElement("a",{href:"#",key:"decline",onClick:s},"Decline")];return r.a.createElement("div",{className:"Invitation"},r.a.createElement("span",{className:"InvitationBody"},u.created),r.a.createElement("div",{className:"InvitationControllers"},m))};var T=function(){var e=P(),t=Object(o.a)(e,3),n=t[0],a=t[1],c=t[2];if(!n)return r.a.createElement("p",null,"Loading...");var l=n.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(J,{invitation:e}))}),u=l.length?r.a.createElement("ul",null,l):r.a.createElement("p",null,"Nothing found");return r.a.createElement("div",{className:"sent"},r.a.createElement("h2",null,"Sent"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:a,onChange:function(e){return c(e.target.value)}})),u)};var A=function(){var e=D(),t=Object(o.a)(e,3),n=t[0],a=t[1],c=t[2];if(!n)return r.a.createElement("p",null,"Loading...");var l=n.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(J,{invitation:e}))}),u=l.length?r.a.createElement("ul",null,l):r.a.createElement("p",null,"Nothing found");return r.a.createElement("div",{className:"received"},r.a.createElement("h2",null,"Received"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:a,onChange:function(e){return c(e.target.value)}})),u)},M=1;function q(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),c=n[0],l=n[1],u=Object(a.useState)(""),i=Object(o.a)(u,2),f=i[0],s=i[1],m=L(),d=Object(o.a)(m,2),v=(d[0],d[1]),p=w(),E=Object(o.a)(p,1)[0];if(!E)return r.a.createElement("p",null,"Loading...");var b=E.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)});return console.log(E),E.length&&!c&&l(E[0].id),console.log(c),r.a.createElement("div",{className:"invite"},r.a.createElement("h2",null,"Invite"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v({senderId:M,receiverId:c,message:f})}},r.a.createElement("div",null,r.a.createElement("label",null,"Receiver",r.a.createElement("select",{value:c,onChange:function(e){console.log(e.target.value),l(e.target.value)}},b))),r.a.createElement("div",null,r.a.createElement("label",null,"Message",r.a.createElement("input",{type:"text",value:f,onChange:function(e){return s(e.target.value)}}))),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:"Send"}))))}n(59);var z=function(){return r.a.createElement(u.a,null,r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.b,{to:"/"},"Profile")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/sent/"},"Sent")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/received/"},"Received")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/invite/"},"Invite")))),r.a.createElement(i.a,{path:"/",exact:!0,component:B}),r.a.createElement(i.a,{path:"/sent/",component:T}),r.a.createElement(i.a,{path:"/received/",component:A}),r.a.createElement(i.a,{path:"/invite/",component:q})))};l.a.render(r.a.createElement(z,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.b91834a2.chunk.js.map